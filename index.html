<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eau Pure - Livraison √† Domicile</title>
    <style>
        /* ================================================= */
        /* == STYLES G√âN√âRAUX & CLIENT (CATALOGUE)        == */
        /* ================================================= */

        :root {
            --couleur-primaire: #007bff; /* Bleu Eau */
            --couleur-secondaire: #28a745; /* Vert Commande */
            --couleur-fond: #f8f9fa;
            --couleur-texte: #343a40;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--couleur-fond);
            color: var(--couleur-texte);
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 20px auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        }

        h1, h2, h3 {
            color: var(--couleur-primaire);
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 5px;
            margin-top: 25px;
        }

        /* Catalogue des produits */
        .produit {
            margin-bottom: 15px;
            padding: 10px 0;
            border-bottom: 1px dashed #ced4da;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .produit-info {
            flex-grow: 1;
        }

        .produit-prix {
            font-weight: bold;
            color: var(--couleur-secondaire);
            margin-right: 15px;
        }
        
        /* Champs de quantit√© */
        .quantite-input {
            width: 50px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            text-align: center;
        }

        /* Total */
        .total-section {
            padding: 15px;
            background-color: #e9f7ef;
            border-radius: 4px;
            text-align: right;
            font-size: 1.5em;
            margin-top: 20px;
        }

        /* Formulaire de Livraison */
        .form-group {
            margin-bottom: 15px;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        /* Boutons */
        .btn-commande {
            width: 100%;
            padding: 12px;
            background-color: var(--couleur-secondaire);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 10px;
            transition: background-color 0.3s;
        }

        .btn-commande:hover {
            background-color: #1e7e34;
        }

        .lien-livreur {
            display: block;
            text-align: center;
            margin-top: 20px;
            color: var(--couleur-primaire);
            text-decoration: none;
        }

        /* ================================================= */
        /* == STYLES LIVREUR (LOGIN & ADMIN)              == */
        /* ================================================= */

        .page-login-livreur, .page-admin-orders {
            padding: 40px;
            max-width: 400px;
            margin: 50px auto;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* Admin Orders Styles (pour le simple affichage ici) */
        .page-admin-orders {
             max-width: 90%; 
        }

        .table-orders {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 0.9em;
        }

        .table-orders th, .table-orders td {
            border: 1px solid #dee2e6;
            padding: 8px;
            text-align: left;
        }

        .table-orders th {
            background-color: var(--couleur-primaire);
            color: white;
        }
        
        .status-badge {
            padding: 5px 8px;
            border-radius: 3px;
            color: white;
            font-weight: bold;
            font-size: 0.8em;
            text-transform: uppercase;
        }

        .status-new { background-color: #ffc107; color: #343a40; }
        .status-delivery { background-color: #007bff; }
        .status-delivered { background-color: var(--couleur-secondaire); }

        /* Masquage des pages au chargement */
        #loginPage, #adminPage {
            display: none;
        }

    </style>
</head>
<body>

    <div id="clientPage" class="container">
        <h1>üíß Eau Pure</h1>
        <p>Livraison d'eau √† votre porte</p>

        <h2>Nos Eaux</h2>
        <form id="commandeFormulaire">
            <h3>Eau Pure</h3>
            <div class="produit">
                <div class="produit-info">Sachets individuels (150FC / sachet)</div>
                <span class="produit-prix">150FC</span>
                <input type="number" min="0" value="0" data-prix="150" class="quantite-input">
            </div>
            <div class="produit">
                <div class="produit-info">Pack de 12 sachets (1 500FC / pack)</div>
                <span class="produit-prix">1 500FC</span>
                <input type="number" min="0" value="0" data-prix="1500" class="quantite-input">
            </div>

            <h3>Eau Swissta</h3>
            <div class="produit">
                <div class="produit-info">Bouteilles individuelles (500FC / bouteille)</div>
                <span class="produit-prix">500FC</span>
                <input type="number" min="0" value="0" data-prix="500" class="quantite-input">
            </div>
            <div class="produit">
                <div class="produit-info">Pack de 12 bouteilles (5 000FC / pack)</div>
                <span class="produit-prix">5 000FC</span>
                <input type="number" min="0" value="0" data-prix="5000" class="quantite-input">
            </div>

            <h3>Eau Spasso</h3>
            <div class="produit">
                <div class="produit-info">Bouteilles individuelles (500FC / bouteille)</div>
                <span class="produit-prix">500FC</span>
                <input type="number" min="0" value="0" data-prix="500" class="quantite-input">
            </div>
            <div class="produit">
                <div class="produit-info">Pack de 12 bouteilles (5 000FC / pack)</div>
                <span class="produit-prix">5 000FC</span>
                <input type="number" min="0" value="0" data-prix="5000" class="quantite-input">
            </div>

            <h3>Eau America</h3>
            <div class="produit">
                <div class="produit-info">Bouteilles individuelles (500FC / bouteille)</div>
                <span class="produit-prix">500FC</span>
                <input type="number" min="0" value="0" data-prix="500" class="quantite-input">
            </div>
            <div class="produit">
                <div class="produit-info">Pack de 12 bouteilles (5 000FC / pack)</div>
                <span class="produit-prix">5 000FC</span>
                <input type="number" min="0" value="0" data-prix="5000" class="quantite-input">
            </div>

            <div class="total-section">
                Total: <span id="totalPrix">0</span>FC
            </div>

            <h2>Informations de Livraison</h2>
            <div class="form-group"><input type="text" id="nomClient" placeholder="Nom" required></div>
            <div class="form-group"><input type="text" id="adresseClient" placeholder="Adresse" required></div>
            <div class="form-group"><input type="tel" id="telephoneClient" placeholder="T√©l√©phone" required></div>

            <button type="submit" class="btn-commande">Commander</button>
        </form>
        
        <a href="#" class="lien-livreur" onclick="showPage('login')">Connexion Livreur</a>
    </div>

    <div id="loginPage" class="page-login-livreur">
        <h1>üîí Connexion Livreur</h1>
        <p>Acc√©dez √† vos commandes.</p>
        
        <form id="loginForm">
            <div class="input-group">
                <label for="identifiant">Identifiant</label>
                <input type="text" id="identifiant" required>
            </div>
            
            <div class="input-group">
                <label for="password">Mot de passe</label>
                <input type="password" id="password" required>
            </div>
            
            <button type="submit" class="btn-commande">Se Connecter</button>
            <a href="#" class="lien-livreur" onclick="showPage('client')">Retour Client</a>
        </form>
    </div>

    <div id="adminPage" class="container page-admin-orders">
        <h1>‚öôÔ∏è Gestion des Commandes</h1>
        <p>Tableau de bord du Livreur/Admin.</p>

        <table class="table-orders">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Client / T√©l.</th>
                    <th>Adresse</th>
                    <th>D√©tail Commande</th>
                    <th>Total</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="ordersTableBody">
                </tbody>
        </table>
        <a href="#" class="lien-livreur" onclick="showPage('client')">D√©connexion / Client</a>
    </div>


    <script>
        // =================================================
        // == LOGIQUE JAVASCRIPT                          ==
        // =================================================

        document.addEventListener('DOMContentLoaded', () => {
            const clientPage = document.getElementById('clientPage');
            const loginPage = document.getElementById('loginPage');
            const adminPage = document.getElementById('adminPage');
            const commandeFormulaire = document.getElementById('commandeFormulaire');
            const loginForm = document.getElementById('loginForm');
            const totalElement = document.getElementById('totalPrix');
            const quantiteInputs = document.querySelectorAll('.quantite-input');
            const ordersTableBody = document.getElementById('ordersTableBody');

            // Simuler une base de donn√©es de commandes
            let commandesDB = [];

            // Fonction pour changer de page
            function showPage(page) {
                clientPage.style.display = 'none';
                loginPage.style.display = 'none';
                adminPage.style.display = 'none';

                if (page === 'client') {
                    clientPage.style.display = 'block';
                } else if (page === 'login') {
                    loginPage.style.display = 'block';
                } else if (page === 'admin') {
                    adminPage.style.display = 'block';
                    loadAdminOrders();
                }
            }

            // Afficher la page client par d√©faut
            showPage('client');


            // -------------------------------------------------
            // LOGIQUE CLIENT (CALCUL ET COMMANDE)
            // -------------------------------------------------

            function calculerTotal() {
                let total = 0;
                quantiteInputs.forEach(input => {
                    const prixUnitaire = parseInt(input.getAttribute('data-prix'));
                    const quantite = parseInt(input.value) || 0; // Utiliser 0 si NaN
                    if (quantite > 0) {
                        total += prixUnitaire * quantite;
                    }
                });
                totalElement.textContent = total.toLocaleString('fr-FR');
                return total;
            }

            // √âcouter les changements dans les champs de quantit√©
            quantiteInputs.forEach(input => {
                input.addEventListener('input', calculerTotal);
            });


            // G√©rer la soumission du formulaire de commande
            commandeFormulaire.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const total = calculerTotal();

                if (total === 0) {
                    alert("Votre panier est vide. Veuillez s√©lectionner des produits.");
                    return;
                }
                
                // R√©cup√©rer les d√©tails de la commande
                let detailsCommande = [];
                quantiteInputs.forEach(input => {
                    const quantite = parseInt(input.value) || 0;
                    if (quantite > 0) {
                        // Chercher le nom du produit (logique simplifi√©e)
                        const produitDiv = input.closest('.produit');
                        let nomProduit = "Article Inconnu";
                        if(produitDiv) {
                             nomProduit = produitDiv.querySelector('.produit-info').textContent.trim();
                        } else {
                            // Pour les packs qui ne sont pas dans un div .produit
                            const h3 = input.closest('h3');
                            if(h3) nomProduit = h3.textContent.trim();
                        }
                        
                        detailsCommande.push(`${quantite} x ${nomProduit.replace(/\(.+\)/, '').trim()}`);
                    }
                });

                // Cr√©ation de l'objet commande (Simule l'envoi au backend)
                const nouvelleCommande = {
                    id: commandesDB.length + 1,
                    nomClient: document.getElementById('nomClient').value,
                    adresse: document.getElementById('adresseClient').value,
                    telephone: document.getElementById('telephoneClient').value,
                    details: detailsCommande.join('; '),
                    total: total,
                    statut: 'Nouveau', // Statut initial
                    livreur: 'Non Affect√©'
                };

                commandesDB.push(nouvelleCommande);
                alert(`Commande #${nouvelleCommande.id} de ${total.toLocaleString('fr-FR')}FC envoy√©e ! Votre commande sera trait√©e bient√¥t.`);

                // R√©initialiser le formulaire
                commandeFormulaire.reset();
                calculerTotal();
            });


            // -------------------------------------------------
            // LOGIQUE LIVREUR (LOGIN)
            // -------------------------------------------------

            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const identifiant = document.getElementById('identifiant').value;
                const password = document.getElementById('password').value;

                // LOGIQUE D'AUTHENTIFICATION SIMPLIFI√âE :
                if (identifiant === 'livreur' && password === '1234') {
                    alert("Connexion r√©ussie ! Bienvenue Livreur.");
                    showPage('admin'); // Afficher la page Admin/Livreur
                } else if (identifiant === 'admin' && password === 'admin') {
                     alert("Connexion r√©ussie ! Bienvenue Admin.");
                    showPage('admin'); // Afficher la page Admin
                } else {
                    alert("Identifiant ou mot de passe incorrect.");
                }

                loginForm.reset();
            });


            // -------------------------------------------------
            // LOGIQUE ADMIN (ADMINORDERS)
            // -------------------------------------------------

            function loadAdminOrders() {
                ordersTableBody.innerHTML = ''; // Vider le tableau
                if (commandesDB.length === 0) {
                    ordersTableBody.innerHTML = '<tr><td colspan="7" style="text-align:center;">Aucune commande en attente.</td></tr>';
                    return;
                }

                commandesDB.forEach(cmd => {
                    const row = ordersTableBody.insertRow();

                    // D√©terminer la classe du badge de statut
                    let statusClass = 'status-new';
                    if (cmd.statut.includes('livraison')) statusClass = 'status-delivery';
                    if (cmd.statut === 'Livr√©') statusClass = 'status-delivered';

                    row.innerHTML = `
                        <td>#${cmd.id}</td>
                        <td>${cmd.nomClient}<br>T√©l: ${cmd.telephone}</td>
                        <td>${cmd.adresse}</td>
                        <td>${cmd.details.replace(/; /g, '<br>')}</td>
                        <td>${cmd.total.toLocaleString('fr-FR')} FC</td>
                        <td><span class="status-badge ${statusClass}">${cmd.statut}</span></td>
                        <td>
                            <button onclick="changeStatus(${cmd.id}, 'En cours de livraison')">Affecter & Livrer</button>
                            <button onclick="changeStatus(${cmd.id}, 'Livr√©')" style="background-color: #007bff; color:white; border: none; margin-top:5px;">Terminer</button>
                        </td>
                    `;
                });
            }

            // Rendre la fonction accessible globalement pour les boutons du tableau
            window.changeStatus = (id, newStatus) => {
                const cmd = commandesDB.find(c => c.id === id);
                if (cmd) {
                    cmd.statut = newStatus;
                    alert(`Commande #${id} : Statut mis √† jour vers "${newStatus}"`);
                    loadAdminOrders(); // Recharger le tableau
                }
            };
        });
    </script>

</body>
</html>
